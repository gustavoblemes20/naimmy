# Caddyfile para ambiente Docker
{
    auto_https off
}

# Site principal
localhost {
    root * /srv
    php_fastcgi php:9000
    file_server
    
    # WordPress rewrite rules
    @wp {
        path_regexp ^/(wp-admin|wp-includes|wp-content|index\.php)
    }
    rewrite @wp /index.php?{query}
    
    # WooCommerce specific
    @woo {
        path /shop/*
        path /cart/*
        path /checkout/*
        path /my-account/*
        path /wc-api/*
    }
    rewrite @woo /index.php?{query}
    
    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
    }
    
    # Gzip compression
    encode gzip
}